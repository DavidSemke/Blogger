include iconElementList
include ../icon/iconElement

mixin blogPostList(blogPosts, attrs={})
    ul.blog-post-list&attributes(attrs)
        each blogPost in blogPosts
            li.blog-post-item(id=blogPost._id)
                .blog-post-item__top 
                    .blog-post-item__title= blogPost.title
                    .blog-post-item__date-group
                        .blog-post-item__published= `Published: ${blogPost.publish_date || 'N/A'}`
                        .blog-post-item__last-modified= `Last modified: ${blogPost.last_modified_date}`
                .blog-post-item__bottom
                    - let likes = '-'
                    - let dislikes = '-'
                    - let totalComments = '-'
                    
                    if blogPost.publish_date 
                        - likes = blogPost.likes
                        - dislikes = blogPost.dislikes 
                        - totalComments = blogPost.comments.length

                    +iconElementList(
                        [{
                            'tag': 'div',
                            'icon': '/images/likeIcon.png',
                            'label': likes,
                            'attrs': {
                                'class': 'blog-post-item__likes'
                            }
                        },
                        {
                            'tag': 'div',
                            'icon': '/images/dislikeIcon.png',
                            'label': dislikes,
                            'attrs': {
                                'class': 'blog-post-item__dislikes'
                            }
                        },
                        {
                            'tag': 'div',
                            'icon': '/images/commentIcon.png',
                            'label': totalComments,
                            'attrs': {
                                'class': 'blog-post-item__total-comments'
                            }
                        }],
                        {
                            'iconElementList': {
                                'class': [
                                    '-gap-medium'
                                ]
                            },
                            'iconElement': {
                                'class': [
                                    '-small'
                                ]
                            }
                        }
                    )
                    .blog-post-item__actions
                        +iconElement(
                            'a',
                            '/images/editIcon.png',
                            null,
                            {
                                'href': `/users/${mainUser.username}/blog-posts/${blogPost._id}`,
                                'class': [
                                    '-small',
                                    '-button',
                                    '-colorful', 
                                    '-padding-even-slim'
                                ]
                            }
                        )
                        +iconElement(
                            'button',
                            '/images/deleteIcon.png',
                            null,
                            {
                                'class': [
                                    'blog-post-item__delete-button',
                                    '-small',
                                    '-colorful',
                                    '-padding-even-slim'
                                ]
                            }
                        )