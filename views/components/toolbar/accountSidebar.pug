include ../list/iconElementList
include ../icon/iconElement

.account-sidebar.sidebar.-closed
    .sidebar__title Account
    if mainUser
        - let icon = '/images/profileIcon.png'
        
        if mainUser.profile_pic
            - const pic = mainUser.profile_pic
            - const base64 = pic.data.toString('base64')
            - icon = `data:${pic.contentType};base64,${base64}`
            
        +iconElement(
            'div',
            icon,
            mainUser.username,
            {
                'class': [
                    'account-sidebar__overview',
                    '-avatar',
                    '-large',
                    '-gap-medium'
                ]
            }
        )
        +iconElementList(
            [{
                'tag': 'a',
                'icon': '/images/profileIcon.png',
                'label': 'Your Profile',
                'attrs': {
                    'href': `/users/${mainUser.username}`,
                }
            },
            {
                'tag': 'a',
                'icon': '/images/blogPostIcon.png',
                'label': 'Your Blog Posts',
                'attrs': {
                    'href': `/users/${mainUser.username}/blog-posts`,
                }
            }],
            {
                'iconElementList': {
                    'class': [
                        '-gap-small',
                        '-column',
                        '-align-start'
                    ]
                },
                'iconElement': {
                    'class': '-gap-small'
                }
            }
        )
        .account-sidebar__logout
            a(href='/logout') Logout
    else 
        .account-sidebar__signup-prompt.signup-prompt
            .signup-prompt__text Not a member?
            a.signup-prompt__link(href='/signup' class='-button') Sign Up